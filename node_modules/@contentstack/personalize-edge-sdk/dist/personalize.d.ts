import { Sdk } from './sdk';
export declare type DeferredPromise<T> = {
    promise: Promise<T>;
    resolve: (...args: any) => any;
    reject: (...args: any) => any;
};
export declare namespace Personalize {
    /**
     * `setUserId` options
     *
     * @property preserveUserAttributes - set to `true` to merge user attributes from the current user
     * @interface
     */
    type SetUserIdOptions = {
        preserveUserAttributes?: boolean;
    };
    /**
     * SDK initialization options
     *
     * @property request - Web standard Request object. Use this in a edge function to pass
     * the incoming request object. The SDK will check the request object for cookies to track the user,
     * and extract preset attributes such as query parameters, referrer, geolocation etc.
     * @property userId - The user ID. Pass the user ID explicitly.
     * @property customVariantQueryParam - Pass a custom variant query parameter name.
     * @property liveAttributes - Pass custom attributes object to be used as live attributes.
     * These must be custom attributes that are already configured in your Personalize project.
     * @interface
     */
    type InitOptions = {
        request?: Request;
        userId?: string;
        customVariantQueryParam?: string;
        liveAttributes?: ClientAttributes;
    };
    type ClientAttributes = {
        [key: string]: any;
    };
    /**
     * Manifest Experience
     *
     * Manifest Experience is a mapping between the Experience Short UID and the active Variant Short UID
     *
     * @property shortUid - The Experience Short UID
     * @property activeVariantShortUid - The active Variant Short UID
     * @interface
     */
    type ManifestExperience = {
        shortUid: string;
        activeVariantShortUid: string | null;
    };
    type Manifest = {
        activeVariants: Record<string, string>;
        experiences: ManifestExperience[];
    };
    type InitializationStatus = 'initializing' | 'success' | 'error';
    /**
     * Trigger Impression Options
     *
     * Trigger impressions with either Experence Short UIDs or Variant Aliases.
     *
     * @property experienceShortUids - A list of Experience Short UIDs. The corresponding
     * active variantsare picked from the Manifest.
     * @property aliases - A list of Variant Aliases. An alias consists of an Experience Short UID
     * and a corresponding Variant Short UID.
     * @interface
     */
    type TriggerImpressionOptions = {
        experienceShortUids?: string[];
        aliases?: string[];
    };
    /**
     * Query parameter name for passing Personalize variants to the origin
     * server from your edge function. You can customize this parameter by
     * passing a different parameter when initializing the SDK with `init(projectUid, options)`.
     *
     * @example
     * ```ts
     * url.searchParams.set(Personalize.VARIANT_QUERY_PARAM, variantParam);
     * ```
     */
    let VARIANT_QUERY_PARAM: string;
    /**
     * Initialize the Personalize SDK
     *
     * `init()` creates and returns a new instance of the SDK for the given project and context.
     * It fetches the manifest based on the context and can then be used to perform various operations
     * such as `getVariants`, `set`, `triggerImpression`, etc.
     * If `init` is performed in a browser environment and a manifest cookie is present
     * (e.g., added by the `addStateToResponse()` method),
     * it will use the manifest from the cookie.
     *
     * @param projectUid - Project UID, find this in the Personalize project settings
     * @param options - Initialization options
     *
     * @returns A promise that resolves to the SDK instance
     *
     * @example
     * ```ts
     * const sdk = await Personalize.init(projecUid, { request });
     * ```
     */
    function init(projectUid: string, options?: InitOptions): Promise<Sdk>;
    /**
     * Change the Edge API URL. Useful if you want to point to a different ContentStack environment.
     *
     * Call this method before initializing the SDK.
     *
     * @param edgeApiUrl - Edge API URL
     * @example
     * ```ts
     * Personalize.setEdgeApiUrl('https://eu-personalize-edge.contentstack.com');
     * const sdk = await Personalize.init(projectUid);
     * ```
     */
    function setEdgeApiUrl(edgeApiUrl: string): void;
    /**
     * @deprecated This method is deprecated. Use instance method `getExperiences` on the SDK instance instead.
     * @example
     * ```ts
     * const sdk = await Personalize.init(projectUid);
     * sdk.getExperiences(); // [{shortUid: 'a', activeVariantShortUid: '0'}]
     * ```
     * Gets the active experiences
     *
     * Returns a list of experience and corresponding active variant short UIDs.
     *
     * An inactive experience will have `null` in the corresponding `activeVariantShortUid`.
     *
     * The list is sorted in the order of experience priority. The experiences higher in the
     * list have higher priority.
     *
     * Call this method after initializing the SDK.
     *
     * @returns The active experiences
     * @example
     * ```ts
     * Personalize.getExperiences(); // [{shortUid: 'a', activeVariantShortUid: '0'}]
     * ```
     */
    function getExperiences(): ManifestExperience[];
    /**
     * @deprecated This method is deprecated. Use instance method `triggerImpression` on the SDK instance instead.
     * @example
     * ```ts
     * const sdk = await Personalize.init(projectUid);
     * const experienceShortUid = 'a';
     * await sdk.triggerImpression(experienceShortUid);
     * ```
     * Triggers an impression
     *
     * The `triggerImpression` method triggers an impression for a given experience. The impression
     * is sent for the active variant in the manifest. Call this method whenever an experience is
     * shown to the user.
     *
     * Call this method after initializing the SDK.
     *
     * @param experienceShortUid - The experience short UID to trigger the impression for.
     * @example
     * ```ts
     * const experienceShortUid = 'a';
     * await Personalize.triggerImpression(experienceShortUid);
     * ```
     */
    function triggerImpression(experienceShortUid: string): Promise<void>;
    /**
     * @deprecated This method is deprecated. Use instance method `triggerImpressions` on the SDK instance instead.
     * @example
     * ```ts
     * const sdk = await Personalize.init(projectUid);
     * const experienceShortUids = ['a', 'b'];
     * await sdk.triggerImpressions({ experienceShortUids });
     * await sdk.triggerImpressions({ aliases: ['cs_personalize_a_0', 'cs_personalize_b_1'] });
     * ```
     * Triggers impressions
     *
     * The `triggerImpressions` method triggers multiple impressions for the given input. If provided
     * with Experience Short Uids, the impression is sent for the corresponding active variants in the manifest.
     * If provided wih Variant Aliases instead, it will use the Experience Short UID and Variant Short UID in the
     * alias to trigger impressions, without referring to the manifest.
     *
     * Call this method whenever an experience is shown to the user.
     *
     * Call this method after initializing the SDK.
     *
     * @param triggerImpressionOptions - Trigger Impression Options, one of
     * `experienceShortUids` or `aliases` must be given.
     * @example
     * ```ts
     * const experienceShortUids = ['a', 'b'];
     * await Personalize.triggerImpressions({ experienceShortUids });
     * await Personalize.triggerImpressions({ aliases: ['cs_personalize_a_0', 'cs_personalize_b_1'] });
     * ```
     */
    function triggerImpressions(triggerImpressionOptions: TriggerImpressionOptions): Promise<void>;
    /**
     * @deprecated This method is deprecated. Use instance method `triggerEvent` on the SDK instance instead.
     * @example
     * ```ts
     * const sdk = await Personalize.init(projectUid);
     * await sdk.triggerEvent('clickCTA);
     * ```
     * Trigger an event
     *
     * An event is any significant action performed by the user such as clicking on the CTA,
     * scrolling to the end of the page, etc. The event is triggered by passing an `eventKey`,
     * which is used to create the event in the Personalize Management console. Triggering events
     * allow you to measure conversions for an A/B test.
     *
     * Call this method after initializing the SDK.
     *
     * @param eventKey - The key to trigger an event for. Ensure that an event with this key is
     * created in Personalize.
     * @example
     * ```ts
     * await Personalize.triggerEvent('clickCTA');
     * ```
     */
    function triggerEvent(eventKey: string): Promise<void>;
    /**
     * @deprecated This method is deprecated. Use instance method `set` on the SDK instance instead.
     * @example
     * ```ts
     * const sdk = await Personalize.init(projectUid);
     * await sdk.set({ age:20 });
     * ```
     * Set custom user attributes
     *
     * User attributes are key-value pairs describing user traits. To use the set attributes,
     * you must create the attribute with the same key in the Personalize Management console.
     *
     * This method can only be called after initializing the SDK.
     *
     * @param clientAttributes - Attributes set on the client. Must be an object.
     * @example
     * ```ts
     * await Personalize.set({ age: 20 });
     * ```
     */
    function set(clientAttributes: ClientAttributes): Promise<void>;
    /**
     * @deprecated This method is deprecated. Use instance method `setUserId` on the SDK instance instead.
     * @example
     * ```ts
     * const sdk = await Personalize.init(projectUid);
     * await sdk.setUserId(newUserId, { preserveUserAttributes: true });
     * ```
     * Sets the `userId`
     *
     * The `userId` is used to identify the current user. It is automatically generated at the edge
     * when initializing the SDK for the first time.
     *
     * Use this method when you want to identify the current user with an externally managed user ID.
     * For e.g., you can use this when an anonymous user logs in.
     *
     * When an anonymous user logs in, you may also want to preserve all the user attributes tracked thus far.
     * The option `preserveUserAttributes` is available for the same, which merges all the attributes from
     * the current user.
     *
     * The `setUserId` method also drops a cookie to track the user ID in browser environments. The cookie
     * is called `cs-personalize-user-id`.
     *
     * Call this method before or after initializing the SDK.
     *
     * @param userId - The new user ID for the current user
     * @param options - Pass options to preserve user attributes
     * @example
     * ```ts
     * await Personalize.setUserId(newUserId, { preserveUserAttributes: true });
     * ```
     */
    function setUserId(userId: string, options?: SetUserIdOptions): Promise<void>;
    /**
     * @deprecated This method is deprecated. Use instance method `getUserId` on the SDK instance instead.
     * @example
     * ```ts
     * const sdk = await Personalize.init(projectUid);
     * sdk.getUserId();
     * ```
     * Get the current `userId`
     *
     * Call this method after initializing the SDK.
     *
     * @returns the `userId`, else returns undefined if no `userId` is present
     */
    function getUserId(): string | undefined;
    /**
     * @deprecated This method is deprecated. Use instance method `getActiveVariant` on the SDK instance instead.
     * @example
     * ```ts
     * const sdk = await Personalize.init(projectUid);
     * sdk.getActiveVariant(experienceShortUid);
     * ```
     * Check for the active variant in the given experience
     *
     * Given an experience short UID, return the activated variant short UID for that experience.
     *
     * This method can only be called after initializing the SDK.
     *
     * @param experienceShortUid - Experience Short UID. Can be obtained from the
     * Personalize Management Console in the experience details page, or from a variant alias.
     * @returns The short UID of the active variant, if no variant is active, returns `null`.
     * @example
     * ```ts
     * const activeVariant = Personalize.getActiveVariant(experienceShortUid);
     * ```
     */
    function getActiveVariant(experienceShortUid: string): string | null;
    /**
     * Tells you the status of SDK initialization.
     *
     * The status transitions to `initializing` when the SDK is initialized.
     * Once the initialization is complete (the promise is fulfilled), the status
     * transitions to `success`. If there's an error initializing, it transitions to `error`.
     *
     * Use this method to avoid calling SDK methods before it is initialized.
     *
     * ```ts
     * const initializationPromise = Personalize.init(projectUid);
     *
     * Personalize.getInitializationStatus(); // `initializing`
     *
     * await initializationPromise;
     *
     * Personalize.getInitializationStatus(); // `success`
     * ```
     */
    function getInitializationStatus(): InitializationStatus | undefined;
    /**
     * @deprecated This method is deprecated. Use instance method `addStateToResponse` on the SDK instance instead.
     * @example
     * ```ts
     * const sdk = await Personalize.init(projectUid);
     * sdk.addStateToResponse(response);
     * ```
     * Adds `userId` and manifest as set-cookie headers to the response
     *
     * `addStateToResponse` is a useful helper method that takes a response object
     * and adds cookies to track the user. It also adds a cookie to track the current manifest
     * for the user.
     *
     * The helper is typically used in an edge function to track the user state. When used this way,
     * it also allows the Personalize SDK to be initialized in the browser without making a
     * call to fetch the manifest.
     *
     * Call this method after initializing the SDK.
     *
     * @param response - A Web standard response object
     * @example
     * ```ts
     * await Personalize.addStateToResponse(response);
     * ```
     */
    function addStateToResponse(response: Response): Promise<void>;
    /**
     * @deprecated This method is deprecated. Use instance method `getVariants` on the SDK instance instead.
     * @example
     * ```ts
     * const sdk = await Personalize.init(projectUid);
     * sdk.getVariants(); // {a: 0, b: 1}
     * ```
     * Gets the active variants
     *
     * Returns a key-value pair of the active experience and variant short UIDs.
     *
     * An inactive experience will have `null` in the corresponding value.
     *
     * Call this method after initializing the SDK.
     *
     * @returns The active variants
     * @example
     * ```ts
     * Personalize.getVariants(); // {a: 0, b: 1}
     * ```
     */
    function getVariants(): Record<string, string>;
    /**
     * @deprecated This method is deprecated. Use instance method `getVariantAliases` on the SDK instance instead.
     * @example
     * ```ts
     * const sdk = await Personalize.init(projectUid);
     * sdk.getVariantAliases(); // ['cs_personalize_a_0', 'cs_personalize_b_1']
     * ```
     * Gets the active variant aliases
     *
     * Returns a list of active experiences as variant aliases. Variant aliases are used by
     * Personalize to identify a CMS variant. The aliases can be passed to the CMS Delivery API
     * to fetch the personalized variant of content entries.
     *
     * The order in the list reflects the priority of the variants. The aliases higher in the list
     * have higher priority.
     *
     * Call this method after initializing the SDK.
     *
     * @returns The active variant aliases
     * @example
     * ```ts
     * Personalize.getVariantAliases(); // ['cs_personalize_a_0', 'cs_personalize_b_1']
     * ```
     */
    function getVariantAliases(): string[];
    /**
     * @deprecated This method is deprecated. Use instance method `getVariantParam` on the SDK instance instead.
     * @example
     * ```ts
     * const sdk = await Personalize.init(projectUid);
     * sdk.getVariantParam(); // 'a_0,b_1'
     * ```
     * Gets the active variant param
     *
     * Returns an opaque variant parameter that can be easily passed in the URL.
     *
     * The parameter is essentially a comma separated list of active experience / variant short UIDs.
     *
     * The variant param can be passed as a query parameter in the URL to send the list of variants
     * activated for the current user. This helper method is typically used in edge functions.
     *
     * Call this method after initializing the SDK.
     *
     * @returns The active variant param
     * @example
     * ```ts
     * Personalize.getVariantParam(); // 'a_0,b_1'
     * ```
     */
    function getVariantParam(): string;
    /**
     * Convert a variant param to a list of variant aliases
     *
     * Returns a list of variant aliases from a variant param.
     *
     * The variant param can be passed as a query parameter in the URL to send the list of variants
     * activated for the current user. This helper method is typically used in server side code to decode
     * the variant parameter as a list of variant aliases that can be passed to the CMS Delivery API.
     *
     * @param variantParam - The variant param generated by `Personalize.getVariantParam()`
     * @returns The list of variant aliases
     * @example
     * ```ts
     * const variantParam = Personalize.getVariantParam(); // 'a_0,b_1'
     * Personalize.variantParamToVariantAliases(variantParam); // ['cs_personalize_a_0', 'cs_personalize_b_1']
     * ```
     */
    function variantParamToVariantAliases(variantParam: string): string[];
    /**
     * @deprecated This method is deprecated. It will be removed in a future release.
     * Resets the SDK
     *
     * Calling this method resets the SDK to the original state. In particular:
     * - the manifest is deleted
     * - the `userId` is deleted
     * - any cookies in a browser environment are removed
     *
     * @example
     * ```ts
     * await Personalize.init(projectUid);
     * Personalize.getUserId(); // returns a random user ID
     * Personalize.reset();
     * Personalize.getUserId(); // returns `undefined`
     * ```
     */
    function reset(): void;
    /**
     * @ignore
     */
    function resetData(): void;
}
