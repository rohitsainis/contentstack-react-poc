import { Personalize } from './personalize';
declare type ClientAttributes = Personalize.ClientAttributes;
declare type Manifest = Personalize.Manifest;
declare type ManifestExperience = Personalize.ManifestExperience;
declare type TriggerImpressionOptions = Personalize.TriggerImpressionOptions;
declare type SetUserIdOptions = Personalize.SetUserIdOptions;
export declare class Sdk {
    private _edgeApiURL;
    private _isBrowserEnvironment;
    private _projectUid;
    private _userId;
    private _manifestData;
    VARIANT_QUERY_PARAM: string;
    constructor(projectUid: string, manifestData: Manifest, edgeApiURL: string, userId: string, isBrowserEnvironment: boolean, variantQueryParam: string);
    /**
     * Gets the active experiences
     *
     * Returns a list of experience and corresponding active variant short UIDs.
     *
     * An inactive experience will have `null` in the corresponding `activeVariantShortUid`.
     *
     * The list is sorted in the order of experience priority. The experiences higher in the
     * list have higher priority.
     *
     * Call this method after initializing the SDK.
     *
     * @returns The active experiences
     * @example
     * ```ts
     * sdk.getExperiences(); // [{shortUid: 'a', activeVariantShortUid: '0'}]
     * ```
     */
    getExperiences(): ManifestExperience[];
    /**
     * Triggers an impression
     *
     * The `triggerImpression` method triggers an impression for a given experience. The impression
     * is sent for the active variant in the manifest. Call this method whenever an experience is
     * shown to the user.
     *
     * Call this method after initializing the SDK.
     *
     * @param experienceShortUid - The experience short UID to trigger the impression for.
     * @example
     * ```ts
     * const experienceShortUid = 'a';
     * await sdk.triggerImpression(experienceShortUid);
     * ```
     */
    triggerImpression(experienceShortUid: string): Promise<void>;
    /**
     * Triggers impressions
     *
     * The `triggerImpressions` method triggers multiple impressions for the given input. If provided
     * with Experience Short Uids, the impression is sent for the corresponding active variants in the manifest.
     * If provided wih Variant Aliases instead, it will use the Experience Short UID and Variant Short UID in the
     * alias to trigger impressions, without referring to the manifest.
     *
     * Call this method whenever an experience is shown to the user.
     *
     * Call this method after initializing the SDK.
     *
     * @param triggerImpressionOptions - Trigger Impression Options, one of
     * `experienceShortUids` or `aliases` must be given.
     * @example
     * ```ts
     * const experienceShortUids = ['a', 'b'];
     * await sdk.triggerImpressions({ experienceShortUids });
     * await sdk.triggerImpressions({ aliases: ['cs_personalize_a_0', 'cs_personalize_b_1'] });
     * ```
     */
    triggerImpressions(triggerImpressionOptions: TriggerImpressionOptions): Promise<void>;
    /**
     * Trigger an event
     *
     * An event is any significant action performed by the user such as clicking on the CTA,
     * scrolling to the end of the page, etc. The event is triggered by passing an `eventKey`,
     * which is used to create the event in the Personalize Management console. Triggering events
     * allow you to measure conversions for an A/B test.
     *
     * Call this method after initializing the SDK.
     *
     * @param eventKey - The key to trigger an event for. Ensure that an event with this key is
     * created in Personalize.
     * @example
     * ```ts
     * await sdk.triggerEvent('clickCTA');
     * ```
     */
    triggerEvent(eventKey: string): Promise<void>;
    /**
     * Set custom user attributes
     *
     * User attributes are key-value pairs describing user traits. To use the set attributes,
     * you must create the attribute with the same key in the Personalize Management console.
     *
     * This method can only be called after initializing the SDK.
     *
     * @param clientAttributes - Attributes set on the client. Must be an object.
     * @example
     * ```ts
     * await sdk.set({ age: 20 });
     * ```
     */
    set(clientAttributes: ClientAttributes): Promise<void>;
    /**
     * Sets the `userId`
     *
     * The `userId` is used to identify the current user. It is automatically generated at the edge
     * when initializing the SDK for the first time.
     *
     * Use this method when you want to identify the current user with an externally managed user ID.
     * For e.g., you can use this when an anonymous user logs in.
     *
     * When an anonymous user logs in, you may also want to preserve all the user attributes tracked thus far.
     * The option `preserveUserAttributes` is available for the same, which merges all the attributes from
     * the current user.
     *
     * The `setUserId` method also drops a cookie to track the user ID in browser environments. The cookie
     * is called `cs-personalize-user-id`.
     *
     * Call this method before or after initializing the SDK.
     *
     * @param userId - The new user ID for the current user
     * @param options - Pass options to preserve user attributes
     * @example
     * ```ts
     * await sdk.setUserId(newUserId, { preserveUserAttributes: true });
     * ```
     */
    setUserId(userId: string, options?: SetUserIdOptions): Promise<void>;
    /**
     * Get the current `userId`
     *
     * Call this method after initializing the SDK.
     *
     * @returns the `userId`, else returns undefined if no `userId` is present
     */
    getUserId(): string | undefined;
    /**
     * Check for the active variant in the given experience
     *
     * Given an experience short UID, return the activated variant short UID for that experience.
     *
     * This method can only be called after initializing the SDK.
     *
     * @param experienceShortUid - Experience Short UID. Can be obtained from the
     * Personalize Management Console in the experience details page, or from a variant alias.
     * @returns The short UID of the active variant, if no variant is active, returns `null`.
     * @example
     * ```ts
     * const activeVariant = sdk.getActiveVariant(experienceShortUid);
     * ```
     */
    getActiveVariant(experienceShortUid: string): string | null;
    /**
     * Adds `userId` and manifest as set-cookie headers to the response
     *
     * `addStateToResponse` is a useful helper method that takes a response object
     * and adds cookies to track the user. It also adds a cookie to track the current manifest
     * for the user.
     *
     * The helper is typically used in an edge function to track the user state. When used this way,
     * it also allows the Personalize SDK to be initialized in the browser without making a
     * call to fetch the manifest.
     *
     * Call this method after initializing the SDK.
     *
     * @param response - A Web standard response object
     * @example
     * ```ts
     * await sdk.addStateToResponse(response);
     * ```
     */
    addStateToResponse(response: Response): void;
    /**
     * Gets the active variants
     *
     * Returns a key-value pair of the active experience and variant short UIDs.
     *
     * An inactive experience will have `null` in the corresponding value.
     *
     * Call this method after initializing the SDK.
     *
     * @returns The active variants
     * @example
     * ```ts
     * sdk.getVariants(); // {a: 0, b: 1}
     * ```
     */
    getVariants(): Record<string, string>;
    /**
     * Gets the active variant aliases
     *
     * Returns a list of active experiences as variant aliases. Variant aliases are used by
     * Personalize to identify a CMS variant. The aliases can be passed to the CMS Delivery API
     * to fetch the personalized variant of content entries.
     *
     * The order in the list reflects the priority of the variants. The aliases higher in the list
     * have higher priority.
     *
     * Call this method after initializing the SDK.
     *
     * @returns The active variant aliases
     * @example
     * ```ts
     * sdk.getVariantAliases(); // ['cs_personalize_a_0', 'cs_personalize_b_1']
     * ```
     */
    getVariantAliases(): string[];
    /**
     * Gets the active variant param
     *
     * Returns an opaque variant parameter that can be easily passed in the URL.
     *
     * The parameter is essentially a comma separated list of active experience / variant short UIDs.
     *
     * The variant param can be passed as a query parameter in the URL to send the list of variants
     * activated for the current user. This helper method is typically used in edge functions.
     *
     * Call this method after initializing the SDK.
     *
     * @returns The active variant param
     * @example
     * ```ts
     * sdk.getVariantParam(); // 'a_0,b_1'
     * ```
     */
    getVariantParam(): string;
    /**
     * Convert a variant param to a list of variant aliases
     *
     * Returns alist of variant aliases from a variant param.
     *
     * The variant param can be passed as a query parameter in the URL to send the list of variants
     * activated for the current user. This helper method is typically used in server side code to decode
     * the variant parameter as a list of variant aliases that can be passed to the CMS Delivery API.
     *
     * @param variantParam - The variant param generated by `sdk.getVariantParam()`
     * @returns The list of variant aliases
     * @example
     * ```ts
     * const variantParam = sdk.getVariantParam(); // 'a_0,b_1'
     * sdk.variantParamToVariantAliases(variantParam); // ['cs_personalize_a_0', 'cs_personalize_b_1']
     * ```
     */
    variantParamToVariantAliases(variantParam: string): string[];
    private getCompactAliases;
    private getExperienceAndVariantFromAlias;
    private generateCookie;
    private setUserAttributesOnEdge;
}
export {};
